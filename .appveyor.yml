environment:
  matrix:
    - PYTHON: "C:\\Python35-x64"

branches:
  except:
    - gh-pages
    - adding_icons
    - gh-pages

platform:
    - x64

install:
  - "SET PATH=%PYTHON%;%PYTHON%\\Scripts;%PATH%"
  - pip install coverage
  - pip install codecov
  - cmd: cd C:\projects
  - ps: Start-FileDownload 'https://builder.blender.org/download/blender-2.78-6a5487e-win64.zip'
  - 7z.exe x blender-2.78-6a5487e-win64.zip
  - ls
  - cmd: mv blender-2.78.0-git.6a5487e-windows64 blender
  - cmd: rm blender-2.78-6a5487e-win64.zip
  - cmd: mklink /j /D C:\projects\blender\2.78\scripts\addons\uv_align_distribute C:\projects\uv-align-distribute\uv_align_distribute
  - rm C:\projects\blender\2.78\scripts\addons_contrib\uv_align_distribute.py
  - cmd: cd C:\projects\uv-align-distribute

build: off

test_script:
  - cmd: coverage run --source . tests.py ../blender/blender

after_test:
  # This step builds your wheels.
  # Again, you only need build.cmd if you're building C extensions for
  # 64-bit Python 3.3/3.4. And you need to use %PYTHON% to get the correct
  # interpreter
  - codecov
